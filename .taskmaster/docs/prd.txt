# SMS-connect WordPress Plugin - Product Requirements Document

## 프로젝트 개요
SMS-connect는 우커머스 기반 온라인 쇼핑몰에서 SMS/LMS/MMS 문자 메시지와 카카오 알림톡을 자동으로 발송하는 워드프레스 플러그인입니다.

## 주요 기능 요구사항

### 1. SMS/LMS/MMS 발송 기능
- **자동 발송 시스템**: 우커머스 주문 상태 변경 시 자동으로 SMS 발송
- **메시지 타입 자동 선택**: 메시지 길이에 따라 SMS(90자 이하) 또는 LMS로 자동 선택
- **MMS 첨부파일 지원**: 이미지 파일 첨부 기능
- **관리자/고객 구분 발송**: 관리자용과 고객용 메시지 각각 설정
- **발신번호 관리**: 여러 발신번호 등록 및 관리 시스템
- **수신거부 관리**: 수신차단 번호 관리 기능
- **템플릿 변수 시스템**: 쇼핑몰명, 고객명, 주문번호, 상품명, 주문금액 등 동적 데이터 삽입

### 2. 카카오 알림톡 발송 기능
- **카카오 비즈니스 채널 연동**: 플러스친구 인증 및 등록 시스템
- **알림톡 템플릿 관리**: 템플릿 등록, 수정, 삭제, 승인 요청 기능
- **이미지 템플릿 지원**: 이미지가 포함된 알림톡 템플릿 관리
- **대체 발송 기능**: 알림톡 발송 실패 시 SMS로 자동 대체 발송
- **템플릿 상태 관리**: 승인 대기, 승인됨, 반려 등 상태 관리

### 3. 관리자 설정 인터페이스
- **기본 설정 페이지**: SMS/알림톡 서비스 활성화/비활성화 설정
- **발송 설정 페이지**: 주문 상태별 메시지 내용 설정 인터페이스
- **템플릿 관리 페이지**: 알림톡 템플릿 등록 및 관리 인터페이스
- **발송 이력 페이지**: 발송 성공/실패 이력 조회 및 필터링
- **직관적인 UI**: 탭 기반의 체계적인 설정 페이지
- **실시간 미리보기**: 메시지 템플릿 실시간 미리보기 기능
- **도움말 시스템**: 각 설정 항목별 상세 설명 및 가이드

### 4. API 연동 구조
- **모듈화된 API 클래스**: SMS API와 알림톡 API 분리된 클래스 구조
- **에러 처리 시스템**: 친화적인 에러 메시지 및 로깅 시스템
- **AJAX 기능**: 모든 설정 변경 및 발송 요청을 AJAX로 비동기 처리
- **라이센스 인증 구조**: 플러그인 라이센스 자동 인증 시스템
- **API 응답 처리**: 성공/실패 응답에 대한 체계적인 처리

### 5. 고급 기능 UI (기능 구현 제외)
- **규칙 기반 발송 인터페이스**: 조건부 발송 설정 UI
- **예약 발송 인터페이스**: 지연 발송 및 예약 시간 설정 UI
- **상품별/카테고리별 규칙 UI**: 상품/카테고리별 다른 메시지 템플릿 설정 UI
- **회원 등급별 발송 UI**: 회원 등급에 따른 차별화된 메시지 설정 UI
- **대상 선별 발송 UI**: 역할별, 상품별, 카테고리별 구매자 대상 발송 UI

## 기술 요구사항

### WordPress 및 WooCommerce 연동
- **WordPress 버전**: 5.2 이상
- **WooCommerce 버전**: 4.0 이상
- **PHP 버전**: 7.2 이상
- **WooCommerce 훅 시스템**: 주문 상태 변경 이벤트 처리
- **WordPress 액션/필터**: 워드프레스 표준 훅 시스템 활용

### 플러그인 구조
- **메인 플러그인 파일**: sms-connect.php
- **클래스 기반 구조**: 기능별 클래스 분리
- **네임스페이스 사용**: PHP 네임스페이스를 통한 코드 구조화
- **오토로더**: PSR-4 기준 클래스 자동 로딩
- **설정 관리**: WordPress Options API 활용

### 데이터베이스
- **WordPress Options**: 플러그인 설정 저장
- **커스텀 테이블**: 발송 이력 저장용 테이블 (선택사항)
- **메타데이터**: 주문/사용자 메타데이터 활용

### 보안 요구사항
- **권한 검사**: 관리자 권한 사용자만 설정 변경 가능
- **CSRF 보호**: 모든 AJAX 요청에 nonce 검증
- **입력 검증**: 사용자 입력값에 대한 철저한 검증 및 새니타이징
- **SQL 인젝션 방지**: Prepared Statement 사용

## 사용자 인터페이스 요구사항

### 관리자 페이지 구조
1. **대시보드**: 발송 현황 및 주요 정보 요약
2. **기본 설정**: 서비스 활성화 및 기본 정보 설정
3. **SMS 설정**: SMS 발송 관련 설정
4. **알림톡 설정**: 알림톡 발송 관련 설정
5. **템플릿 관리**: 메시지 템플릿 관리
6. **발송 이력**: 발송 결과 조회 및 관리
7. **고급 설정**: 규칙 기반 발송 등 고급 기능 설정

### 사용자 경험 요구사항
- **직관적인 네비게이션**: 명확한 메뉴 구조
- **반응형 디자인**: 다양한 화면 크기 지원
- **빠른 로딩**: 최적화된 스크립트 및 스타일
- **에러 피드백**: 친화적인 에러 메시지 및 성공 알림

## 성능 요구사항
- **비동기 처리**: 대량 발송 시 백그라운드 처리
- **캐싱**: 설정 정보 캐싱을 통한 성능 최적화
- **메모리 효율성**: 대용량 데이터 처리 시 메모리 효율적 구현
- **데이터베이스 최적화**: 효율적인 쿼리 및 인덱스 활용

## 호환성 요구사항
- **멀티사이트 지원**: WordPress 멀티사이트 환경 지원
- **다국어 지원**: 국제화(i18n) 기능 구현
- **테마 호환성**: 다양한 워드프레스 테마와 호환
- **플러그인 호환성**: 주요 우커머스 확장 플러그인과 호환

## 배포 및 유지보수
- **버전 관리**: Semantic Versioning 적용
- **업데이트 시스템**: 안전한 플러그인 업데이트 메커니즘
- **백업 호환성**: 설정 백업 및 복원 기능
- **로깅 시스템**: 디버깅을 위한 상세 로그 기능

## 테스트 요구사항
- **단위 테스트**: 주요 기능별 단위 테스트
- **통합 테스트**: 우커머스 연동 기능 테스트
- **사용자 테스트**: 실제 사용 환경에서의 테스트
- **성능 테스트**: 대량 발송 상황에서의 성능 테스트 